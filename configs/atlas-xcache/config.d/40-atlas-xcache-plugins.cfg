#
# Configure XRootD Caching Proxy (`XCache`) for ATLAS deploys.
#
# **********************************************************************
# * WARNING: DO NOT EDIT THIS FILE.  IT WILL BE OVERWRITTEN ON UPGRADE *
# **********************************************************************
#
# This file is part of the ATLAS XCache Daemon

set eRAMSIZE=$XC_RAMSIZE
set eSPACELOWWM=$XC_SPACE_LOW_WM
set eSPACEHIGHWM=$XC_SPACE_HIGH_WM
set eBLOCKSIZE=$XC_BLOCKSIZE
set ePREFETCH=$XC_PREFETCH

# This is arbitrary as the clients will provide the origin
pss.origin =

# Cache plugin parameters
#
# These values should be sufficient for most use cases. To change them, override them
# in a later file such as 90-local.cfg.

# The size of the blocks in cache; all reads to the data federation
# will be rounded along these boundaries.
pfc.blocksize $eBLOCKSIZE
# Amount of memory to use for blocks in flight; this is NOT a RAM cache,
# just a temporary buffer.
# 1GB is 200 files concurrently downloaded with 10 prefetch blocks.
pfc.ram $eRAMSIZE
# Number of blocks to prefetch from a file at once.
pfc.prefetch $ePREFETCH
# The low-water and high-water marks for the disk usage; once disk usage
# goes above the high-water mark, the cache deletes until it hits the low-water
# mark.
pfc.diskusage $eSPACELOWWM $eSPACEHIGHWM
# Specifies the names of oss.space name for data and the oss.space name for metadata
pfc.spaces data meta


# Load the correct libraries for XCache to operate:
# First, the proxy library itself.
ofs.osslib  libXrdPss.so
# Second, the cache underlying the proxy.
pss.cachelib libXrdFileCache.so
# Third, the Rucio namespace-mapping
pss.namelib -lfncache /usr/lib64/XrdName2NameDCP4RUCIO.so
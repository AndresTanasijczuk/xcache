#
# Configure XRootD Caching Proxy (`XCache`) for OSG deploys.
#
# **********************************************************************
# * WARNING: DO NOT EDIT THIS FILE.  IT WILL BE OVERWRITTEN ON UPGRADE *
# **********************************************************************
#
# This file is part of the StashCache Daemon
# https://opensciencegrid.org/docs/data/stashcache/overview/


# The location of data federation this XCache participates in
#
# By default, we set this to the OSG Data Federation
pss.origin redirector.osgstorage.org:1094
#
# Alternately, use the following line for a test sesrver
#
# pss.origin redirector-itb.osgstorage.org:1094


# Currently, the LIGO data origin is not part of the OSG Data Federation.
# Have this enabled temporarily until this is resolved.
# See SOFTWARE-3507
if named stash-cache-auth
   pss.origin xrootd-local.unl.edu:1094
fi


# Cache plugin parameters
#
# These values should be sufficient for most use cases. To change them, override them
# in a later file such as 90-local.cfg.

# The size of the blocks in cache; all reads to the data federation
# will be rounded along these boundaries.
pfc.blocksize 512k
# Amount of memory to use for blocks in flight; this is NOT a RAM cache,
# just a temporary buffer.
# 1GB is 200 files concurrently downloaded with 10 prefetch blocks.
pfc.ram       1g
# Number of blocks to prefetch from a file at once.
pfc.prefetch  10
# The low-water and high-water marks for the disk usage; once disk usage
# goes above the high-water mark, the cache deletes until it hits the low-water
# mark.
pfc.diskusage 0.90 0.95


# Load the correct libraries for XCache to operate:
# First, the proxy library itself.
ofs.osslib  libXrdPss.so
# Second, the cache underlying the proxy.
pss.cachelib libXrdFileCache.so


# Tune the client timeouts to more aggressively timeout.
pss.setopt ParallelEvtLoop 10
pss.setopt RequestTimeout 25
pss.setopt ConnectTimeout 25
pss.setopt ConnectionRetry 2

